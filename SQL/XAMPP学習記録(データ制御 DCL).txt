SQL 基本編【Part 6】データベースをより使いやすく

◎ DCL(Data Control Language)：データ制御言語
→ データベースのユーザ権限の管理やデータのトランザクション処理を行うための言語


<<代表的なコマンド>>
→ GRANT	(権限の付加)
→ REVOKE	(権限の剥奪)

→ COMMIT	(変更の確定)
→ ROLLBACK	(変更の取り消し)


06． トランザクションの設定

※ トランザクション：データベースに対する１つ以上の更新処理

※ MYSQLは、SQLの処理を担当する部分とデータの格納を担当する部分に分かれる。(p.70 参照)
   後者を「ストレージエンジン」と呼び、InnoDB型やMyISAM型などがある。
   MySQLの標準ストレージエンジンはInnoDB型であり、トランザクション機能がある。
   一方、MyISAM型にはトランザクション機能がない。
   
[確認]
	SHOW CREATE table tbl_employee;
	↓
	ENGINE=InnoDB DEFAULT CHARSET=utf8
	上記の項目がMyISAMになっていたらトランザクションは使えない


	InnoDB型：対象のレコードのみをロック(行ロック)
	MyISAM型：対象のテーブル自体をロック(テーブルロック)
	
構文：(開始) START TRANSACTION; //トランザクションの開始

	  (処理) ・・・
	  
	  (戻す / 確定) ROLLBACK; / COMMIT;
	  
例）[開始] START TRANSACTION;

(確認) SELECT * FROM tbl_employee;
(変更) UPDATE tbl_employee SET name = '山本達也'
	   WHERE code = 104;
	   SELECT * FROM tbl_employee WHERE code = 104;


例）[開始] START TRANSACTION;
	
	(確認) SELECT * FROM tbl_employee;
	(変更) UPDATE tbl_employee SET name = '山本達也'
		   WHERE code = 104;
		   SELECT * FROM tbl_employee WHERE code = 104;
		   
	(削除) DELETE FROM tbl_employee WHERE code = 104;
		   SELECT * FROM tbl_employee;
		   
	(追加) INSERT INTO tbl_employee
		   VALUES
		   (106, '斉藤高志', '1982-03-03', 20, NULL, 102);
		   SELECT * FROM tbl_employee;
		   
	(戻す) ROLLBACK;
	(確認) SELECT * FROM tbl_employee;





