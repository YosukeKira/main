<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@page import="java.util.ArrayList,teamMasterMind.PlayerResult,teamMasterMind.AnsNum" %>
<%
AnsNum cpu = (AnsNum) session.getAttribute("cpu");
ArrayList<PlayerResult> resultList = ( ArrayList<PlayerResult> ) session.getAttribute("resultList");
//Arrayリストに入っている要素の数を取得
int challenge = resultList.size();
%>


<!DOCTYPE html>
<html lang="ja" dir="ltr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>マスターマインド</title>
<link rel="stylesheet" href="cssFile.css" />
<script src="javaScriptFile.js"></script>
<script>
<!--

//選択されている番号を示す変数
var count = 0;

//numberボタンが押された時の処理
function numClick( num ){
	document.images[count].src="number/number" + num + ".png";
	count++;

	if (count >= 4){
		count = 0;
	}
	selectBtn();
}

//数字下の選択ボタンが押された時の処理
function select( num ){
	count = num;
	selectBtn();
}

//数字下の選択ボタンの整合性を保つ処理
function selectBtn(){
	switch(count){
		case 0:
			document.getElementById("first").src="button/btn_2.gif";
			document.getElementById("second").src="button/btn_1.gif";
			document.getElementById("third").src="button/btn_1.gif";
			document.getElementById("fourth").src="button/btn_1.gif";
			break;
		case 1:
			document.getElementById("second").src="button/btn_2.gif";
			document.getElementById("first").src="button/btn_1.gif";
			document.getElementById("third").src="button/btn_1.gif";
			document.getElementById("fourth").src="button/btn_1.gif";
			break;
		case 2:
			document.getElementById("third").src="button/btn_2.gif";
			document.getElementById("first").src="button/btn_1.gif";
			document.getElementById("second").src="button/btn_1.gif";
			document.getElementById("fourth").src="button/btn_1.gif";
			break;
		case 3:
			document.getElementById("fourth").src="button/btn_2.gif";
			document.getElementById("first").src="button/btn_1.gif";
			document.getElementById("second").src="button/btn_1.gif";
			document.getElementById("third").src="button/btn_1.gif";
			break;
	}
}

//リセットボタンが押された時の処理
function reSet(){
	for (i = 0; i <= 3; i++){
		document.images[i].src="number/number0.png";
	}
	count = 0;
	selectBtn();
}
-->
</script>
</head>
<body>
<h1>MasterMindゲーム</h1>

<table style="float:left; margin-right:50px;" border="1" width="20%" height="500">
<caption style="text-align:left;">履歴</caption>

<!-- 履歴表の表示 -->
<%
for (int i = 0; i < 10; i++){
	if( i < challenge ){
%>
<tr><td><%= i + 1 %>回目：<%= resultList.get(i).getPlayerResult() %></td><td>Hit：<%= resultList.get(i).getHit() %><br />Blow：<%= resultList.get(i).getBlow()  %></td></tr>

<%	} else { %>
<tr><td>？回目：？？？？</td><td>Hit：？<br />Blow：？</td></tr>
<%  }	} %>

</table>

<h1>おめでとう！正解です！</h1>
<br />
<p><%= challenge %>回目の挑戦で正解しました！</p>
<p>おめでとうございます！天才！！</p>
<br />
<hr />
<p>正解の数字：<%= cpu.getAnsNum() %></p>
<%
	session.invalidate();
%>
</body>
</html>